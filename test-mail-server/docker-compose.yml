version: '3.8'

services:
  smtp4dev:
    image: rnwood/smtp4dev:latest
    container_name: smtp4dev
    restart: unless-stopped
    ports:
      - "8025:80"    # Web UI
      - "2525:2525"    # SMTP сервер
      - "143:143"    # IMAP сервер
    volumes:
      - smtp4dev-data:/smtp4dev
    environment:
      # Базовые настройки
      - ServerOptions__HostName=localhost
      - ServerOptions__Port=2525
      - ServerOptions__AllowRemoteConnections=true
      - ServerOptions__Database=/smtp4dev/database.db
      - ServerOptions__NumberOfMessagesToKeep=100
      - ServerOptions__NumberOfSessionsToKeep=100
      
      # IMAP настройки
      - ServerOptions__ImapPort=143
      
      # Настройки безопасности (опционально)
      # - ServerOptions__AuthenticationRequired=true
      # - ServerOptions__SmtpUser=testuser
      # - ServerOptions__SmtpPassword=testpass
      
      # TLS настройки (опционально)
      # - ServerOptions__TlsMode=StartTls
      # - ServerOptions__TlsCertificate=/certs/cert.pfx
      # - ServerOptions__TlsCertificatePassword=password

volumes:
  smtp4dev-data:
    driver: local