# CSS Modules Migration Documentation

Задача: доработать компонент уведомлений, чтобы у него были полностью изолированные и независимые стили, чтобы его можно было с легкостью
встроить в любое стороннее приложение как сторонний модуль (отрендерить в нужном месте на странице).

Описание: прототип использовал стилизацию через tailwind, она работала хорошо только если компонент подключался через код.

При загрузке компонента как модуля и рендера его на странице стили страницы перебивали его. Необходимо проанализировать все текущие стили в проекте
и переписать их используя чистые css модули для компонентов

## Обзор

Компонент уведомлений был полностью переработан для использования изолированных CSS модулей вместо Tailwind CSS. Это обеспечивает полную независимость стилей и позволяет легко интегрировать компонент в любое стороннее приложение без конфликтов стилей.

## Что изменилось

### 1. Удалена зависимость от Tailwind CSS

**Было:**
- Использование Tailwind CSS классов напрямую в компонентах
- Зависимость от конфигурации Tailwind
- Возможность конфликтов со стилями родительского приложения

**Стало:**
- Чистые CSS модули для каждого компонента
- Полная изоляция стилей через CSS Modules
- Независимость от внешних CSS фреймворков

### 2. Созданы CSS модули для всех компонентов

Каждый компонент теперь имеет свой собственный `.module.css` файл:

#### Основные компоненты:
- `Toast.module.css` - стили для toast уведомлений
- `ToastContainer.module.css` - контейнер для toast уведомлений
- `NotificationBell.module.css` - иконка колокольчика с бейджем
- `NotificationDropdown.module.css` - выпадающий список уведомлений
- `NotificationItem.module.css` - отдельный элемент уведомления

#### Модальные окна:
- `EmailCodeModal.module.css` - модальное окно для ввода email кода
- `RoutePreferencesModal.module.css` - настройки маршрутов уведомлений

### 3. Обновлен index.css

Файл `index.css` теперь содержит только базовые стили и утилиты:
- Базовые reset стили
- Утилиты для line-clamp
- Размеры для иконок Lucide
- Анимации
- Поддержка reduced motion для доступности

### 4. Удалены устаревшие файлы

- `src/styles/toast.css` - функциональность перенесена в CSS модули

## Преимущества новой архитектуры

### 1. Полная изоляция стилей
- CSS модули автоматически генерируют уникальные имена классов
- Невозможны конфликты со стилями родительского приложения
- Стили компонента не влияют на другие части приложения

### 2. Легкая интеграция
- Компонент можно встроить в любое приложение
- Не требуется настройка Tailwind CSS
- Работает с любым CSS-in-JS решением или без него

### 3. Улучшенная производительность
- Меньший размер бандла (нет Tailwind CSS)
- Только необходимые стили загружаются с компонентом
- CSS модули оптимизируются при сборке

### 4. Лучшая поддерживаемость
- Явная связь между компонентом и его стилями
- Легче находить и изменять стили
- TypeScript поддержка для CSS модулей

## Структура CSS модулей

Каждый CSS модуль следует единой структуре:

```css
/* Основные стили компонента */
.componentName { }

/* Модификаторы состояния */
.componentName.active { }
.componentName.disabled { }

/* Вложенные элементы */
.element { }
.elementModifier { }

/* Темная тема */
@media (prefers-color-scheme: dark) {
  .componentName { }
}

/* Адаптивность */
@media (max-width: 640px) {
  .componentName { }
}

/* Анимации */
@keyframes animationName { }
```

## Использование в компонентах

### Импорт стилей:
```typescript
import styles from './ComponentName.module.css';
```

### Применение классов:
```typescript
// Одиночный класс
<div className={styles.container}>

// Множественные классы
<div className={`${styles.button} ${styles.active}`}>

// Условные классы
<div className={`${styles.item} ${isActive ? styles.active : ''}`}>
```

## Поддержка тем

Все компоненты поддерживают темную тему через media query:
```css
@media (prefers-color-scheme: dark) {
  /* Стили для темной темы */
}
```

## Адаптивность

Компоненты адаптируются под разные размеры экрана:
```css
@media (max-width: 640px) {
  /* Мобильные стили */
}
```

## Доступность

- Поддержка `prefers-reduced-motion` для пользователей с ограниченными возможностями
- Семантические HTML элементы
- ARIA атрибуты где необходимо

## Миграция существующего кода

Если вы используете старую версию компонента с Tailwind:

1. Обновите импорты компонентов
2. Удалите конфигурацию Tailwind (если она использовалась только для этого компонента)
3. Компонент будет работать автоматически с новыми CSS модулями

## Кастомизация стилей

Для кастомизации стилей компонента:

1. Скопируйте нужный `.module.css` файл
2. Измените стили по необходимости
3. Импортируйте измененный файл в компонент

Или используйте CSS переменные (если добавлены в будущем).

## Совместимость

- ✅ React 18+
- ✅ TypeScript 4.5+
- ✅ Vite
- ✅ Webpack 5+
- ✅ Next.js 12+
- ✅ Create React App

## Известные ограничения

- CSS модули требуют поддержки сборщиком (Vite, Webpack, etc.)
- Динамическое изменение стилей требует inline styles или CSS переменных

## Дальнейшие улучшения

Возможные улучшения в будущем:
- [ ] Добавить CSS переменные для легкой кастомизации цветов
- [ ] Создать тему по умолчанию с возможностью переопределения
- [ ] Добавить больше вариантов размеров компонентов
- [ ] Поддержка RTL (right-to-left) языков

## Поддержка

При возникновении проблем со стилями:
1. Проверьте, что CSS модули поддерживаются вашим сборщиком
2. Убедитесь, что импорты стилей корректны
3. Проверьте консоль браузера на ошибки

## Заключение

Миграция на CSS модули делает компонент уведомлений полностью независимым и готовым к использованию в любом React приложении без конфликтов стилей и дополнительных зависимостей.
